# Analytics Service Environment Variables

# Database
ANALYTICS_DATABASE_URL="postgresql://username:password@localhost:5432/ultramarket_analytics"

# Service Configuration
PORT=3009
NODE_ENV="development"
SERVICE_NAME="analytics-service"

# Redis (for caching and real-time data)
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
ANALYTICS_CACHE_TTL=3600 # 1 hour

# ClickHouse (for time-series analytics)
CLICKHOUSE_URL="http://localhost:8123"
CLICKHOUSE_DATABASE="ultramarket_analytics"
CLICKHOUSE_USERNAME="default"
CLICKHOUSE_PASSWORD=""

# External Services
AUTH_SERVICE_URL="http://localhost:3001"
STORE_SERVICE_URL="http://localhost:3003"
ORDER_SERVICE_URL="http://localhost:3006"
USER_SERVICE_URL="http://localhost:3002"

# Event Tracking
ENABLE_EVENT_TRACKING=true
BATCH_SIZE=1000
BATCH_TIMEOUT_MS=5000
MAX_EVENT_AGE_DAYS=365

# Real-time Analytics
ENABLE_REALTIME_ANALYTICS=true
REALTIME_UPDATE_INTERVAL_MS=10000
WEBSOCKET_PORT=3019

# Data Processing
ENABLE_DATA_AGGREGATION=true
AGGREGATION_INTERVAL_MINUTES=15
DAILY_AGGREGATION_HOUR=2 # 2 AM
WEEKLY_AGGREGATION_DAY=1 # Monday

# Reports
ENABLE_AUTOMATED_REPORTS=true
REPORT_GENERATION_HOUR=6 # 6 AM
REPORT_RETENTION_DAYS=90
REPORT_STORAGE_PATH="reports"

# Dashboards
ENABLE_CUSTOM_DASHBOARDS=true
MAX_WIDGETS_PER_DASHBOARD=20
DASHBOARD_CACHE_TTL=300 # 5 minutes

# Alerts
ENABLE_ALERTS=true
ALERT_CHECK_INTERVAL_MINUTES=5
MAX_ALERTS_PER_STORE=50
EMAIL_ALERT_COOLDOWN_MINUTES=60

# Data Export
ENABLE_DATA_EXPORT=true
EXPORT_FORMATS="csv,json,excel"
MAX_EXPORT_ROWS=100000
EXPORT_TIMEOUT_MINUTES=30

# Privacy & Compliance
ANONYMIZE_USER_DATA=true
DATA_RETENTION_DAYS=730 # 2 years
GDPR_COMPLIANCE=true
IP_ANONYMIZATION=true

# Performance
QUERY_TIMEOUT_MS=30000
MAX_CONCURRENT_QUERIES=10
ENABLE_QUERY_CACHE=true
QUERY_CACHE_TTL=1800 # 30 minutes

# Machine Learning
ENABLE_ML_INSIGHTS=false
ML_MODEL_UPDATE_INTERVAL_HOURS=24
PREDICTION_CONFIDENCE_THRESHOLD=0.7

# Geolocation
GEOIP_DATABASE_PATH="data/GeoLite2-City.mmdb"
ENABLE_GEOLOCATION=true
GEOLOCATION_ACCURACY="city"

# API Rate Limiting
RATE_LIMIT_WINDOW_MS=900000 # 15 minutes
RATE_LIMIT_MAX_REQUESTS=5000

# CORS
CORS_ORIGIN="http://localhost:3000,http://localhost:3001"

# Logging
LOG_LEVEL="info"
LOG_FILE="logs/analytics-service.log"
ENABLE_QUERY_LOGGING=false